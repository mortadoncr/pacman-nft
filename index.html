function updatePosition(){
  if(!player.currentDirection) return;

  let dx = 0, dy = 0;
  switch(player.currentDirection){
    case "left": dx = -player.speed; break;
    case "right": dx = player.speed; break;
    case "up": dy = -player.speed; break;
    case "down": dy = player.speed; break;
  }

  // Position propos√©e
  const nextPx = player.px + dx;
  const nextPy = player.py + dy;

  // Centre de Pacman
  const nextCenterX = nextPx + player.size / 2;
  const nextCenterY = nextPy + player.size / 2;

  // Case que le centre de Pacman occupera
  const nextTileX = Math.floor(nextCenterX / tileSize);
  const nextTileY = Math.floor(nextCenterY / tileSize);

  if (canMoveTo(nextTileX, nextTileY)) {
    player.px = nextPx;
    player.py = nextPy;
    player.x = Math.floor((player.px + player.size/2) / tileSize);
    player.y = Math.floor((player.py + player.size/2) / tileSize);
  } else {
    // Blocage : Snap au centre de la case actuelle
    player.px = player.x * tileSize;
    player.py = player.y * tileSize;
    player.currentDirection = null; // Stoppe Pacman
  }
}

